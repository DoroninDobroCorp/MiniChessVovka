# –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ Mini Chess 6x6 Crazyhouse

## ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `mate_trainer` –º–æ–¥—É–ª—è
- ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω venv —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### –£–ª—É—á—à–µ–Ω–∏—è AI

#### 1. –£–≤–µ–ª–∏—á–µ–Ω–∞ –≥–ª—É–±–∏–Ω–∞ –ø–æ–∏—Å–∫–∞
- **–ë—ã–ª–æ**: 8 –ø–æ–ª—É—Ö–æ–¥–æ–≤
- **–°—Ç–∞–ª–æ**: 16 –ø–æ–ª—É—Ö–æ–¥–æ–≤
- **–≠—Ñ—Ñ–µ–∫—Ç**: AI "–≤–∏–¥–∏—Ç" –Ω–∞ 8 —Ö–æ–¥–æ–≤ –≤–ø–µ—Ä—ë–¥ –≤–º–µ—Å—Ç–æ 4

#### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã –±–æ–Ω—É—Å—ã –∑–∞ –¥—Ä–æ–ø-—É–≥—Ä–æ–∑—ã (+25 –∑–∞ —Ñ–∏–≥—É—Ä—É –≤ —Ä—É–∫–µ)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å —Ñ–∏–≥—É—Ä –≤ —Ä—É–∫–µ (–Ω–∞ 50% –≤—ã—à–µ —á–µ–º –Ω–∞ –¥–æ—Å–∫–µ)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ—Ü–µ–Ω–∫–∞ —Ü–µ–Ω—Ç—Ä–∞ (+15 –≤–º–µ—Å—Ç–æ +10)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ—Ä–æ–ª—è (+8 –≤–º–µ—Å—Ç–æ +5)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ü–µ–Ω–∫–∞ –∞—Ç–∞–∫–∏ –Ω–∞ –∑–æ–Ω—É –∫–æ—Ä–æ–ª—è –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞

#### 3. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ö–æ–¥–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **Killer Moves** (–∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ö–æ–¥–æ–≤, –≤—ã–∑–≤–∞–≤—à–∏—Ö –æ—Ç—Å–µ—á–µ–Ω–∏—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ **History Heuristic** (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Ö–æ–¥–æ–≤)
- ‚úÖ –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:
  1. TT move (–∏–∑ —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–∞–Ω—Å–ø–æ–∑–∏—Ü–∏–π)
  2. Killer moves (2 –ª—É—á—à–∏—Ö –Ω–∞ –∫–∞–∂–¥–æ–π –≥–ª—É–±–∏–Ω–µ)
  3. MVV-LVA + history –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö

#### 4. –£–ª—É—á—à–µ–Ω Quiescence Search
- **–ë—ã–ª–æ**: –≥–ª—É–±–∏–Ω–∞ 2
- **–°—Ç–∞–ª–æ**: –≥–ª—É–±–∏–Ω–∞ 4
- **–≠—Ñ—Ñ–µ–∫—Ç**: –ª—É—á—à–∏–π —Ä–∞—Å—á—ë—Ç —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π

#### 5. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ —Ñ–∏–≥—É—Ä
```python
PIECE_VALUES = {
    'P': 100,   # –ü–µ—à–∫–∞
    'N': 320,   # –ö–æ–Ω—å (–Ω–µ–º–Ω–æ–≥–æ —Å–ª–∞–±–µ–µ —Å–ª–æ–Ω–∞)
    'B': 330,   # –°–ª–æ–Ω
    'R': 500,   # –õ–∞–¥—å—è
    'Q': 900,   # –§–µ—Ä–∑—å
    'K': 20000  # –ö–æ—Ä–æ–ª—å
}

HAND_PIECE_VALUES = {
    'P': 150,   # +50% –≤ —Ä—É–∫–µ!
    'N': 400,   # +25% –≤ —Ä—É–∫–µ
    'B': 410,   # +24% –≤ —Ä—É–∫–µ
    'R': 650,   # +30% –≤ —Ä—É–∫–µ
    'Q': 1000   # +11% –≤ —Ä—É–∫–µ
}
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
- **–ò–∑ –∫—ç—à–∞**: <0.01 —Å–µ–∫—É–Ω–¥—ã (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- **–ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (depth 16)**: 10-60 —Å–µ–∫—É–Ω–¥
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**: 7 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –ö—ç—à
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `move_cache.db`
- –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π: 103+ (—Ä–∞—Å—Ç—ë—Ç —Å –∫–∞–∂–¥–æ–π –∏–≥—Ä–æ–π)
- Transposition Table: –≤ –ø–∞–º—è—Ç–∏ (–æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ)

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ GUI –∏–≥—Ä—ã
```bash
./play.sh
# –∏–ª–∏
./venv/bin/python main.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI (AI vs AI –≤ –∫–æ–Ω—Å–æ–ª–∏)
```bash
./venv/bin/python test_ai.py
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏–ª—ã AI
–í —Ñ–∞–π–ª–µ `gamestate.py`, —Å—Ç—Ä–æ–∫–∞ 37:
```python
self.ai_depth = 16  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ 10-18
```

–ò–ª–∏ –≤ —Ñ–∞–π–ª–µ `ai.py`, —Ñ—É–Ω–∫—Ü–∏—è `find_best_move`:
```python
def find_best_move(gamestate: GameState, depth=16):
```

## üèÜ –°–∏–ª–∞ –∏–≥—Ä—ã

### –¢–µ–∫—É—â–∞—è —Å–∏–ª–∞ AI (depth 16):
- ‚úÖ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞ 8 —Ö–æ–¥–æ–≤ –≤–ø–µ—Ä—ë–¥
- ‚úÖ –í–∏–¥–∏—Ç —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
- ‚úÖ –ü–æ–Ω–∏–º–∞–µ—Ç Crazyhouse-—Å–ø–µ—Ü–∏—Ñ–∏–∫—É (–¥—Ä–æ–ø—ã)
- ‚úÖ –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª + –ø–æ–∑–∏—Ü–∏—é + —É–≥—Ä–æ–∑—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —É—Å–ø–µ—à–Ω—ã—Ö —Ö–æ–¥–æ–≤
- ‚úÖ –ü–æ–º–Ω–∏—Ç –ø–æ–∑–∏—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### –û—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è:
**–ü—Ä–∏–º–µ—Ä–Ω–æ 2000-2200 ELO –≤ Mini Chess Crazyhouse**

–î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
- Depth 8: ~1600-1800 ELO
- Depth 12: ~1800-2000 ELO  
- Depth 16: ~2000-2200 ELO (—Ç–µ–∫—É—â–∞—è)
- Depth 20: ~2200-2400 ELO (–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ)

## üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è AI

1. **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –æ–±–º–µ–Ω** - –Ω–∞–±–∏—Ä–∞–µ—Ç —Ñ–∏–≥—É—Ä—ã –≤ —Ä—É–∫—É –¥–ª—è –¥—Ä–æ–ø–æ–≤
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ü–µ–Ω—Ç—Ä–∞** - –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç –≤ —Ü–µ–Ω—Ç—Ä–µ –¥–æ—Å–∫–∏
3. **–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥—Ä–æ–ø—ã** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä–æ–ø—ã –¥–ª—è –∞—Ç–∞–∫ –∏ –∑–∞—â–∏—Ç—ã
4. **–ó–∞—â–∏—Ç–∞ –∫–æ—Ä–æ–ª—è** –≤ opening, **–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ—Ä–æ–ª—å** –≤ endgame
5. **–¢–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç** —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

## üìù –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ
- `main.py` - GUI –∏–≥—Ä–∞ —Å pygame
- `ai.py` - –¥–≤–∏–∂–æ–∫ AI (minimax + —É–ª—É—á—à–µ–Ω–∏—è)
- `gamestate.py` - –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã, –ø—Ä–∞–≤–∏–ª–∞
- `gui.py` - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- `pieces.py` - –¥–∞–Ω–Ω—ã–µ –æ —Ñ–∏–≥—É—Ä–∞—Ö
- `config.py` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ
- `test_ai.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI –±–µ–∑ GUI
- `play.sh` - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- `README_AI.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ AI
- `STATUS.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- `venv/` - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
- `nn/` - –Ω–∞—á–∞—Ç–∞—è —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `*.png` - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∏–≥—É—Ä

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –µ—â—ë —Å–∏–ª—å–Ω–µ–µ:

1. **–£–≤–µ–ª–∏—á–∏—Ç—å depth –¥–æ 18-20** (–±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏** (–∏—Å–ø–æ–ª—å–∑—É—è `nn/model.py` –∏ `nn/mcts.py`)
3. **–î–æ–±–∞–≤–∏—Ç—å opening book** (–±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–µ–±—é—Ç–æ–≤)
4. **–î–æ–±–∞–≤–∏—Ç—å endgame tablebase** (–±–∞–∑—É —ç–Ω–¥—à–ø–∏–ª–µ–π)
5. **–ë–∏—Ç–±–æ—Ä–¥—ã** –≤–º–µ—Å—Ç–æ 2D –º–∞—Å—Å–∏–≤–∞ (–±—ã—Å—Ç—Ä–µ–µ)
6. **Null-move pruning** (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç—Å–µ—á–µ–Ω–∏–µ)

## ‚úÖ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫. AI –∏–≥—Ä–∞–µ—Ç –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –Ω–∞ depth 16.**

–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å - –∑–∞–ø—É—Å—Ç–∏ `./play.sh` –∏ –∏–≥—Ä–∞–π –ø—Ä–æ—Ç–∏–≤ AI, –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏ `./venv/bin/python test_ai.py` —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å AI vs AI.
